<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Mercadillo</title>
    <link rel="stylesheet" href="styleGeneral.css">
    <link rel="stylesheet" href="styleCompra.css">

</head>
<body>
    <input type="hidden" id="idUsuario" value="-1">
    <input type="hidden" id="idProducto" value="-1">
    <header>
        <div  class="parte-superior">
            <div class="img-logo">   
                <button onclick="redirigirABusqueda()" class="logo-button">
                    <!-- Coloca la imagen dentro del botón -->
                    <img src="Imagenes/Logo.png" alt="Logo Cyber Mercadillo" style="width: 180px; height: auto;">
                </button>
            </div>
            <h1>
                <span>Cyber </span><br>
                <span>Mercadillo</span>
            </h1>          
        </div>
    </header>
    <div class="grupo-nav-list">
        <nav>
            <ul class="nav-list">
                <li id="sesion-user-link" class="flex-container"></li>
                <li id="sesion-link"></li>
                <li>
                    <div class="user-icons">
                        <!-- Iconos de usuario (por ejemplo, inicio de sesión, carrito de compras) -->
                    </div>
                </li>
            </ul>
        </nav>
    </div>
    <div class="flex-carro">
        <div class="boton-Volver">
            <button onclick="volverPaginaAnterior()" class="volver-btn">
                <svg viewBox="0 0 384 512" class="svgIcon">
                    <path d="M41.4 214.6c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L141.2 288H448c17.7 0 32-14.3 32-32s-14.3-32-32-32H141.2l105.5-105.5c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path>
                </svg>
            </button>
        </div>
    </div>
    <div class = "texto-titulo">
        <h2>Tramitar Pedido</h2>
    </div>



    <div class="product-container-compra">
        <div class="informacion-compra">
            <div class="shipping-info">
                <div clas="direcciones">
                    <p class="direccion_envio"></p>
                    <h1 class="direccion_facturacion"></h1>
                </div>
                <div class="modif">
                    <button class="boton-Compra"> Modificar Dirección</button>
                </div>
            </div>
            <div class="elegir-pago">
                <h3>Elegir método de pago:</h3>
                <div class="centro_img">   
                    <img src="Imagenes/Paypal.png" class="PagoImg">
                    <img src="Imagenes/Tarjeta.png" class="PagoImg">
                </div>
            </div>
            <div class="payment-info">
                <h2>Pago:</h2>
                <div class="tarjeta-info">
                    <p>Número de tarjeta:</p>
                    <input type="text" placeholder="Ingresa el número de tarjeta">
                </div>
                <div class="tarjeta-info">
                    <p>Fecha de caducidad:</p>
                    <input type="text" placeholder="Ingresa la fecha de caducidad">
                </div>
                <div class="tarjeta-info">
                    <p>CVV:</p>
                    <input type="text" placeholder="Ingresa el CVV">
                </div>
                <div class="modif">
                    <button onclick="ModificarTarjeta()" class="modificar-tarjeta-btn">Modificar Tarjeta</button>
                </div>
            </div>
            <div class="final">
                <div class="inter-final">
                    <h1 class="prod-selecc">Productos Seleccionados: </h1>
                    <h2 class="total-cost">Total: </h2>
                </div>
                <div class="button-container">
                    <button onclick="FinalizarCompra()" class="checkout-button">Finalizar Compra</button>
                </div>
            </div>
        </div>
    </div>
    <!-- <script src="Metodos.js"></script> -->
    <script src="./Metodos/GeneralMetodos.js"></script>
    <script src="./Metodos/MetodosCompra.js"></script>
    <script src="./Metodos/MetodosNavegacion.js"></script>
    <script src="./Metodos/MetodosProducto.js"></script>
    <script>
        window.addEventListener('load', CargaFinCompra);
        window.addEventListener('unload', GuardarBDD);
    </script>
    <script>
        // Obtener referencia a la imagen de tarjeta de crédito
        var tarjetaCreditoImg = document.querySelector('.elegir-pago img[src="Imagenes/Tarjeta.png"]');
        var paypal = document.querySelector('.elegir-pago img[src="Imagenes/Paypal.png"]');

        // Obtener referencias a los campos de entrada de la tarjeta de crédito
        var numeroTarjetaInput = document.querySelector('input[placeholder="Ingresa el número de tarjeta"]');
        var fechaCaducidadInput = document.querySelector('input[placeholder="Ingresa la fecha de caducidad"]');
        var cvvInput = document.querySelector('input[placeholder="Ingresa el CVV"]');
        var modificarTarjetaBtn = document.querySelector('.modificar-tarjeta-btn');
        var finalizarBoton = document.querySelector('.checkout-button');

        // Función para habilitar los campos de entrada de la tarjeta de crédito
        function habilitarCamposTarjeta() {
            numeroTarjetaInput.disabled = false;
            fechaCaducidadInput.disabled = false;
            cvvInput.disabled = false;
            modificarTarjetaBtn.disabled = false;
            finalizarBoton.disabled = false;
        }

        // Función para deshabilitar los campos de entrada de la tarjeta de crédito
        function deshabilitarCamposTarjeta() {
            numeroTarjetaInput.disabled = true;
            fechaCaducidadInput.disabled = true;
            cvvInput.disabled = true;
            modificarTarjetaBtn.disabled = true;
            finalizarBoton.disabled = true;
        }

        // Agregar un controlador de eventos al hacer clic en la imagen de la tarjeta de crédito
        tarjetaCreditoImg.addEventListener('click', function() {
            alert("Metodo de pago seleccionado: \n \n Tarjeta de Crédito");

            // Verificar si la imagen de la tarjeta de crédito está seleccionada
            if (tarjetaCreditoImg.classList.contains('seleccionada')) {
                // Si está seleccionada, deshabilitar los campos de entrada de la tarjeta de crédito
                deshabilitarCamposTarjeta();
                // Además, quitar la clase 'seleccionada'
                tarjetaCreditoImg.classList.remove('seleccionada');
            } else {
                // Si no está seleccionada, habilitar los campos de entrada de la tarjeta de crédito
                habilitarCamposTarjeta();
                // Además, agregar la clase 'seleccionada'
                tarjetaCreditoImg.classList.add('seleccionada');
            }
        });

        paypal.addEventListener('click', function(){
            alert("Metodo de pago seleccionado: \n \n Paypal");
            if (tarjetaCreditoImg.classList.contains('seleccionada')) {
                // Si está seleccionada, deshabilitar los campos de entrada de la tarjeta de crédito
                deshabilitarCamposTarjeta();
                // Además, quitar la clase 'seleccionada'
                tarjetaCreditoImg.classList.remove('seleccionada');
            }
        });

        // Al cargar la página, asegúrate de que los campos de entrada de la tarjeta de crédito estén deshabilitados inicialmente
        deshabilitarCamposTarjeta();
    </script>
    <!--window.addEventListener('load', GuardarCarritoBDD);-->
</body>
</html>
